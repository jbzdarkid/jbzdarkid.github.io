<html>
  <head>
    <script type="text/javascript" src="temp.js"></script>
  </head>
  <body>
    <button id="button">Send Message</label>
    <script>
      var button = document.querySelector('#button');
      var worker = {}
      if (window.Worker) {
        try {
          worker = new Worker('temp.js');
        } catch (e) {
          window.postMessage = function(e){worker.onmessage(e)}
          worker.postMessage = function(e){window.onmessage(e)}
        }
      } else {
        window.postMessage = function(e){worker.onmessage(e)}
        worker.postMessage = function(e){window.onmessage(e)}
      }

      button.onclick = function() {
        var div = document.createElement('div')
        div.style.height = '100px'
        div.style.width = '100px'
        div.style.background = 'red'
        document.body.appendChild(div)
        worker.postMessage()
      };
      worker.onmessage = function() {
        console.log('Recieved at main')
      }
    </script>
  </body>
</html>
