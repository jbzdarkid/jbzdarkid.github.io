<html xmlns="http://www.w3.org/2000/xhtml">
  <head>
    <link rel="stylesheet" type="text/css" href="style.css" id="stylesheet">
    <script type="text/javascript" src="engine/polyominos.js"></script>
    <script type="text/javascript" src="engine/utilities.js"></script>
    <script type="text/javascript" src="engine/puzzle.js"></script>
    <script type="text/javascript" src="engine/generate.js"></script>
    <script type="text/javascript" src="engine/solve.js"></script>
    <script type="text/javascript" src="engine/validate.js"></script>
    <script type="text/javascript" src="engine/display.js"></script>
    <script type="text/javascript" src="engine/trace.js"></script>
    <title>Random puzzles or something</title>
  </head>
  <body>

    <div style="text-align: center"><label style="font-size: 72">Random puzzles from The Witness</label></div>
    <div style="text-align: center;">
      <button id="hint" onclick="showHint()">Show Hint</button>
      <button id="soln" onclick="showSolution()">Show Solution</button>
    </div>
    <div style="text-align: center">
      <label for="sens">Mouse Speed 2D</label>
      <input id="sens" type="range" min="0.1" max="1.3" step="0.1" onchange="localStorage.sensitivity = this.value"/>
      <script>document.getElementById('sens').value = localStorage.sensitivity</script>
    </div>

    <table id="puzzle" cellspacing="0" cellpadding="0"></table>
    <script>
      // Main startup code, detect style + puzzle id, generate, validate, and display puzzle.
      if ('style' in urlParams) {
        if (urlParams['style'] in styles) {
          var style = styles[urlParams['style']]
        } else {
          var style = JSON.parse(urlParams['style'])
        }
      } else {
        var day = [
          'sunday',
          'monday',
          'tuesday',
          'wednesday',
          'thursday',
          'friday',
          'saturday'][(new Date()).getDay()]
        var style = styles[day]
        location.search = 'style='+day
      }
      var puzzle, solution
      if (location.hash == "") {
        // If no seed is provided, choose a random one
        setSeed(Math.floor(Math.random() * (1 << 30)))
      } else { // A seed was provided
        setSeed(parseInt(location.hash.substring(1)))
      }
      var puzzleData = validPuzzle(style)
      draw(puzzleData.puzzle)
      location.hash = puzzleData.seed
      var solution = puzzleData.solutions[_randint(puzzleData.solutions.length)]
      var hints = solution.hints()

      window.showHint = function() {
        if (hints.length <= 0) return
        hints = puzzleData.puzzle.showHint(hints)
        draw(puzzleData.puzzle)
      }
      window.showSolution = function() {
        draw(solution)
      }

    </script>
  </body>
</html>
