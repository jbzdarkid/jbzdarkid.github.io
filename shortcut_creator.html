<html>
  <head>
    <style>
      * {
        vertical-align: middle;
        text-align: center;
      }
      body {
        font-size: 2em;
      }
      input {
        font-size: 0.6em;
        width: 40%;
      }
      .bottom {
        position: fixed;
        bottom: 0;
        width: 100%;
      }
    </style>
    <meta name='apple-mobile-web-app-capable' content='yes'>
    <link id='link' rel='apple-touch-icon' href='Bookmark-icon.png'>
    <title id='title'>Shortcut Creator</title>
  </head>
  <body>
    First, type in the URL for your shortcut: <input type='url' id='linkInput' placeholder='http://www.google.com' onchange='updateLink()'>
    <p>
    Then, give your shortcut a name: <input type='text' id='titleInput' placeholder='Google' onchange='updateTitle()'>
    <p>
    Next, give your shortcut a picture: <input type='file' id='imageInput' onchange='updateImage()'>
    <img id='imagePreview' style='float: right; height:64px'>
    <p class='bottom'>
    Finally, tap <img src='Bookmark-icon.png'> and then <img src='Save_home-icon.png'> to save the shortcut.
    <script type='text/javascript'>

      if (window.navigator.standalone) { // If opened via shortcut
        window.location.href = window.location.hash.substring(1);
      }

      var img = document.getElementById('imagePreview');
      var reader = new FileReader();
      reader.addEventListener('load', function() {
        img.src = reader.result;
        document.getElementById('link').href = reader.result;
      }, false);

      function updateImage() {
        reader.readAsDataURL(document.getElementById('imageInput').files[0]);
      }
      
      function updateTitle() {
        document.getElementById('title').innerHTML = document.getElementById('titleInput').value;
      }
      
      function updateLink() {
        window.location = 'http://www.jbzdarkid.github.io#' + document.getElementById('linkInput').value;
      }
    </script>
  </body>
</html>
